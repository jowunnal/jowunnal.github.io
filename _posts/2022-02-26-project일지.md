---
title: "개발 일일 comment"
categories:
- projects
tags:
- Study
---

개발을 시작한일자는 1/25/2022 이지만, 만들기 시작할때부터 comment를 남길생각을 못했다.. 이유는 금방만들줄알앗고 처음아이디어는 간단하게 시작했기때문에..

간단하게 만들줄알앗던것이 기능들을 더추가시키면서 양이많아졋고, 달리다보니 블로그에대한 생각도 잊혀졋다.....

문득 생각이들어 지금부터라도 남겨야겟다. 70프로정도 만들어둔상태지만


# 아이디어
앱개발을 본격적으로 공부하고싶어지는 마음이들었고(작년6월), Doit안드로이드 앱프로그래밍 책으로 공부를하다가(이게맞나 싶으면서 집중도잘안되다보니 한달공부하고 네달을쉬었다..)  , 12월달쯤 인생의 진로에대해 고민하다가 유튜브알고리즘으로 어느영상을보게됬는데 생각보다 안드로이드가 더매력적으로 보였다.

그래서 이거다! 싶어서 다시시작하려고 유튜브를통해 안드로이드공부법을 찾다가보니 책은 너무 old한지식들이라 공식문서를 보면서 공부하라는 조언이담긴 유튜브영상을 보게됬고,

그것을 시작으로 안드로이드의 핫한 클린아키텍쳐를 접하게되었다.

현업에서 많이사용된다는 RecyclerView와 mvvm+AAC 패턴을 사용해서 앱을 만들고자 생각했는데, 생각보다 아이디어가 안떠올랐고, 일단뭐라도 시작해보자는 마음에

내가 어릴때부터 작년까지 즐겨왓던 게임 '아이모'  를하면서 이전에 알람봇을 카톡봇어플을 이용해서 만들었던 기억을 바탕으로 이번에는 내가 알람앱을 만들어보자! 로 시작됬다.

# 개발1주차~현재
1주차에는 MVVM패턴(Model,ViewModel,View) 에 AAC(Android Architecture Component) 들을 공부하기 시작했다.  

열심히 구글링해서 파악한것으로는 MVVM패턴은 View-ViewModel-Model 순으로 View는 UI만, 데이터를가공하는것은 ViewModel이, 데이터를저장하고 관리하는것은 Model이 각각맡아서 UI와 데이터를 분리하여 처리하는 패턴인것같다. (아직공부가 부족해서 책을한권사서 봐야겠다)

AAC에는 LiveData,ViewModel,Room 과같은것들로 MVVM패턴을 구현화하는것으로 판단된다. ( AAC의 ViewModel의 이름이 MVVM의 ViewModel과 같지만 이름만같을뿐 같은게아니라고한다.)

1주차에는 AAC를 이해하고 만드는데 집중했다. 구글 Developers의 공식문서와 codelab을 참고하면서 Room와Repository로 Model을 구성하고, ViewModel과 LiveData를 이용하여 ViewModel을 구성했다.

Room에는 Entity(DB개체이자 테이블),Dao(Query문들을 작성하는곳), Database(실질적으로 DB파일을만들고, 싱글톤으로 DB객체를 생성하여 리턴받는곳) 로 구성됬다.

Room의 Dao를통해 Query하여 얻은 데이터들은 Repository에서 받아와서 ViewModel이 참조했다.(이렇게 굳이 Repository를 만드는이유는 뷰모델과 데이터베이스사이의 의존성을 줄이고 데이터베이스 혹은 네트워크로부터 받은 데이터들을 이곳에서 추상화하기 위해 사용.  구글에서 권장하는 사항이므로 반드시따르기로 했다.)

Dao에서 LiveData로 return 받은 데이터들을 ViewModel에서 받아서 뷰로 넘겨주었다. 그리고 View에서는 Observer를 사용하여 데이터변경이있으면 React하여 변경된데이터를 즉시 반영하도록 구성했다.

이때 첫번째 Issue 발생- 구글Codelab에서 Dao에서 Query하여 데이터베이스로부터 데이터를 리턴받을때 반환인자를 Flow로 wrapping(감싸다)해왔다. 그이유는 flow로 래핑하면
비동기적으로 데이터를 처리하는거 라고 했다.  그런데 희안하게.. flow로 래핑을 두개의 query(select) 리턴인자로 사용했더니 

처음데이터를 가져올때는 두개다 가져오더니, 앱에서 홈화면으로 나갓다가 다시들어올때 '시스템중지' 가 발생했다.

이부분에대해 3일정도를 소비했는데, 이유는 찾지못했다. 아무리구글링해도 재대로된지식배경도없이 검색효과가없엇던건가.. 그런데 디버깅을 해보았더니
첫번째 observer는 데이터를 가져오는데 두번째observer에서는 데이터를 못가져오는것이었다.

이유를알수없자, 다른 사람들의 MVVM 사용예제를 보면서 비교해봣더니, flow로 래핑하지않고 'LiveData로 가져오는것이었다.

그래서 그렇게시도하자 둘다 데이터를 가져오고 화면밖으로 나갓다가 와도 중지가 되지않았다. ( 이유는 아마 flow에 있는것같으니 이후에 공부해서 원인을 확실히찾자)
